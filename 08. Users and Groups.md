## Users and Groups in Linux 

----
**User**
- A user in Linux is an account that can log into the system and access resources, forming the basis of Linux's multi user security model by enabling permission based control over files, directories, and processes.
- A user account provides security boundaries between people and programs that can run commands.
  - Users have usernames for human identification and ease of working
  - Internally, the system distinguishes user accounts by the unique User ID (UID)
  - A secret password is assigned for user authentication

**User Account Importance**
  - Every process (running program) runs as a specific user
  - Every file has a specific user as its owner
  - File ownership enforces access control for users
  - The user associated with a running process determines accessible files and directories

**User Types in Linux Systems**

| Type | Description | UID |
|------|-------------|-----|
| **Superuser (root)** | Administers the system with full access | 0 |
| **System Users** | Used by processes/daemons providing supporting services; do not log in interactively | 1-200 (static), 201-999 (dynamic) |
| **Regular Users** | For day to day work with limited system access | 1000+ |


**User Information Commands**

**- Display Current User Information**
```bash
cnode@host:~$ id
```
`uid=1000(cnode) gid=1000(cnode) groups=1000(cnode),10(wheel) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023`

**- Display Another User's Information**
```bash
cnode@host:~$ id Dev
```
`uid=1002(Dev) gid=1001(Dev) groups=1001(Dev) context=unconfined_u:unconfined_r:unconfined_t: s0-s0:c0.c1023`

<img width="796" height="162" alt="Screenshot 2025-12-24 at 6 57 08 AM" src="https://github.com/user-attachments/assets/32f4f27f-bd62-4d5a-96b0-8bb3ad819ad4" />

**- Display File/Directory Owner**
```bash
cnode@host:~$ ls -l testfile
-rw-rw-r--.  1 user01 user01 0 Feb  5 11:10 mytextfile. txt

cnode@host: ~$ ls -ld Documents
drwxrwxr-x. 2 user01 user01 6 Feb  5 11:10 Documents
```
<img width="827" height="156" alt="Screenshot 2025-12-24 at 7 02 01 AM" src="https://github.com/user-attachments/assets/8937d7e7-972e-487f-8f36-c19647012427" />


**- Display Process Information**
```bash
cnode@host: ~$ ps awwu
```
<img width="924" height="207" alt="Screenshot 2025-12-24 at 7 04 06 AM" src="https://github.com/user-attachments/assets/5f976c53-89ac-4b7c-aeea-8a073554e7d9" />

> Note: The `ps` command has UNIX style options (with dash) and BSD style options (without dash), each behaving slightly differently.


**User Database Files**

**- `/etc/passwd`:**
  - Stores information about local users.  Each line contains seven colon separated fields: 
  - Format: `<user_name>:<encrypted_password>: <UID>:<GID>:<comment>:<home_dir>: <shell>`
  - Example:
```bash
cnode:x:1000:1000:cnode:/home/cnode:/bin/bash
```

| Field | Description |
|-------|-------------|
| `user01` | Username |
| `x` | Placeholder for encrypted password (now stored in /etc/shadow) |
| `1000` | UID number |
| `1000` | GID number (primary group) |
| `User One` | Comment/description/real name |
| `/home/cnode` | Home directory |
| `/bin/bash` | Default login shell |

**- `/etc/shadow`**
  - Stores cryptographically hashed passwords. Each line contains nine colon separated fields
  - Format: `<user_name>: <Encrypted_Password>:<Password_aging_info>`
  - Example:
```bash
sudo cat /etc/shadow
```
`cnode:$y$j9T$qybndwEWzHhr0uTGAwO4Q0$OuNgGC5Mx2RrCO4JOXtR2VJfTA8dLPxa7NV1tvhziHC: 20222: 0:99999:7:2:20282::`

| Field | Description |
|-------|-------------|
| `cnode` | Username |
| `$y$j... ziHC` | Cryptographically hashed password |
| `20222` | Days since epoch when password was last changed |
| `0` | Minimum days before password can be changed |
| `99999` | Maximum days before password expires |
| `7` | Warning days before password expiration |
| `2` | Inactive days before account is locked |
| `20282` | Account expiration date (days since epoch) |

**- Password Hash Format**
```
$y$j9T$qybndwEWzHhr0uTGAwO4Q0$OuNgGC5Mx2RrCO4JOXtR2VJfTA8dLPxa7NV1tvhziHC
```

| Component | Description |
|-----------|-------------|
| `y` | Hashing algorithm (y=yescrypt, 6=SHA-512, 5=SHA-256) |
| `j9T` | Algorithm tuning parameters |
| `qybndwEWzHhr0uTGAwO4Q0` | Salt (randomly chosen) |
| `OuNgGC5Mx2RrCO4JOXtR2VJfTA8dLPxa7NV1tvhziHC` | Cryptographic hash |

> Note: RHEL 10 uses yescrypt as the default hashing algorithm.  RHEL 9 used SHA-512.

---

**Managing Local User Accounts**

**- Creating Users**
  - Syntax: `useradd <user_name>`
```bash
sudo useradd Dev
sudo useradd sysadmin
sudo useradd user03
sudo useradd bob
```
  - Verify:
```
cat /etc/passwd          # Verify user creation
cat /etc/group           # Check primary group
sudo cat /etc/shadow     # View password/aging info
sudo passwd bob          # Set password
ls /home                 # View home directories
sudo ls -la /home/bob    # View skeleton files copied
```

- Actions performed by useradd:
  1. Reads configuration from `/etc/login.defs`
  2. Writes entry in `/etc/group`, `/etc/passwd`, and `/etc/shadow`
  3. Creates home directory at `/home/username`
  4. Copies user profile files from `/etc/skel` to user's home directory
  5. Creates user mailbox in `/var/spool/mail`

- useradd Options

| Option | Usage |
|--------|-------|
| `-c <comment>` | Add comment/description |
| `-d <home dir>` | Specify home directory |
| `-e <date>` | Account expiry date |
| `-g <group>` | Primary group |
| `-G <groups>` | Supplementary groups (comma-separated) |
| `-s <shell>` | Login shell |
| `-u <UID>` | User ID |

-Examples:
  - Create a group
```
groupadd admin
groupadd hr
groupadd staff
groupadd manager
```

- Create a user named Harrish with UID 1500, home directory /var/Harrish, comment "Harrish, USA, +1 9999 9999", account expiry on 31-12-2030, primary group staff, secondary groups admin and hr, login shell /bin/sh, and set a password.
  
```bash
useradd -c "Harrish, USA, +1 9999 9999" -d /var/Harrish -e 2030-12-31 -g staff -G admin,hr -s /bin/sh -u 1500 Harrish
```
```
passwd Harrish
```
<img width="798" height="405" alt="Screenshot 2025-12-24 at 8 12 01 AM" src="https://github.com/user-attachments/assets/dc58d5f0-d9d9-4bd1-9f7c-49c67c998beb" />


**- Modifying Users (usermod)**
  - Syntax: `usermod [options] username`

| Option | Description |
|--------|-------------|
| `-u, --uid` | Change UID |
| `-g, --gid` | Change primary group |
| `-G, --groups` | Set supplementary groups |
| `-a, --append` | Use with -G to add groups without replacing existing |
| `-d, --home` | Change home directory |
| `-m, --move-home` | Move home directory contents (use with -d) |
| `-s, --shell` | Change login shell |
| `-l, --login` | Change username |
| `-c, --comment` | Add/change comment (GECOS field) |
| `-L, --lock` | Lock user account |
| `-U, --unlock` | Unlock user account |
 
- Example 1:
```bash
usermod -c 'Harrish, Nepal, +977 9810123456' -e 2028-01-01 -G manager -s /bin/bash Harrish
```
![Screenshot 2025-12-24 at 8 14 08 AM](https://github.com/user-attachments/assets/715fa8b9-eefc-4582-ad25-00b654145c76)

- Example 2:
```
sudo useradd natasha
sudo passwd natasha

# Create prerequisites first
sudo groupadd -g 1010 jane
sudo dnf install -y zsh

# Modify user (corrected command)
sudo usermod -u 1010 -g jane -d /home/jane -m -s /bin/zsh -l jane natasha

# Add to supplementary group
sudo usermod -a -G audio jane
```

**- Locking/Unlocking User Accounts**
```bash
usermod -L User_Name    # Lock
usermod -U User_Name    # Unlock
```

When locked, the encrypted password in `/etc/shadow` is prefixed with `!`:
```bash
username:! <encrypted password>: <password aging info>
```
![Screenshot 2025-12-24 at 8 17 00 AM](https://github.com/user-attachments/assets/933b7a38-6e48-444a-b583-5007bc60d91a)


**- Deleting Users**

| Command | Description |
|---------|-------------|
| `userdel username` | Remove user but preserve home directory |
| `userdel -r username` | Remove user and delete home directory |

> Warning: Deleting without `-r` leaves files owned by an unassigned UID, which is a security risk.

- Example:
```
sudo userdel bob         # Keep home directory
sudo userdel -r bob      # Delete home directory too
cat /etc/passwd          # Verify deletion
ls /home                 # Check home directory removal
```

- Example of security risk:
```bash
root@host:~# useradd user01

root@host:~# userdel user01

root@host: ~# useradd -u 1000 user02
  # user02 now owns all files that user01 previously owned
```
<img width="801" height="246" alt="Screenshot 2025-12-24 at 8 20 08 AM" src="https://github.com/user-attachments/assets/0c28b00d-5c55-4d5c-838a-60f3f213aced" />

- Find all unowned files:
```bash
find / -nouser -o -nogroup
```


**- Password Management**

- Password policies: `/etc/security/pwquality.conf`
- Syntax:
```bash
passwd [options] username
```

| Option | Description |
|--------|-------------|
| `-d, --delete` | Delete password |
| `-e, --expire` | Expire password (force reset on next login) |
| `-l, --lock` | Lock password |
| `-u, --unlock` | Unlock password |
| `-S, --status` | Show password status |

- Root can set any password value:
```bash
root@host:~# passwd user01
  New password: redhat
  BAD PASSWORD: The password is shorter than 8 characters
  Retype new password: redhat
  passwd:  password updated successfully
```
> Note: Regular users must use passwords that are at least 8 characters long. 


**Managing User Passwords**

**- Password Verification Process**
  1. System looks up user entry in `/etc/shadow`
  2. Combines salt (a random value stored with your password) with plain text password
  3. Cryptographically hashes the combination
  4. Compares the result with the stored hash
  5. Match = correct password; No match = login fails

**- Password Aging Configuration (chage)**

| Option | Description |
|--------|-------------|
| `-l` | List password policy |
| `-m <days>` | Minimum days between password changes |
| `-M <days>` | Maximum days between password changes |
| `-W <days>` | Warning days before expiration |
| `-I <days>` | Inactive/grace period before account lock |
| `-E <date>` | Account expiry date |
| `-d 0` | Force password change on next login |

- Example:
  - Sets the sysadmin user’s password policy to expire every 90 days, warn 7 days before, allow immediate change, and lock the account after 14 days of inactivity. 
    - Show current password policy
```
sudo chage -l sysadmin
```
    - Change:
```bash
sudo chage -m 0 -M 90 -W 7 -I 14 sysadmin
```
    - Verify:
```
sudo chage -l sysadmin
```
<img width="797" height="206" alt="Screenshot 2025-12-24 at 9 11 35 AM" src="https://github.com/user-attachments/assets/0681e290-12e4-4820-b3e8-783027ce1488" />

**- Set account expiration:**
  - Example: Sets the cloudadmin10 account to expire 30 days from today (2025-05-14). 
```bash
useradd cloudadmin
passwd cloudadmin
```
```
date +%F            #Display today's date


sudo chage -E $(date -d "+30 days" +%F) cloudadmin    # Sets cloudadmin10 account to expire 30 days from today
```

**- Force password change on next login:**
```bash
sudo chage -d 0 cloudadmin
```

**- View password policy:**
```bash
sudo chage -l username
```
<img width="798" height="187" alt="Screenshot 2025-12-24 at 9 25 24 AM" src="https://github.com/user-attachments/assets/d2de377a-43cb-40b4-b55e-2f9bb6c14720" />

**- Disable password aging:**
```
sudo chage -I -1 -m 0 -M 99999 -E -1 username
```

**- Default Password Aging Configuration**
  - Located in `/etc/login.defs`:
          `cat /etc/login.defs`
    
| Variable | Description |
|----------|-------------|
| `PASS_MAX_DAYS` | Maximum password age |
| `PASS_MIN_DAYS` | Minimum password age |
| `PASS_WARN_AGE` | Warning period |


**- Restricting Access**
  - Lock and expire account:
```bash
sudo usermod -L -e 2025-06-01 cloudadmin
```

**- The nologin Shell**
For accounts that should not log in interactively:
```bash
useradd newapp
passwd newapp

usermod -s /sbin/nologin newapp
```

```bash
su - newapp
```
`This account is currently not available.`

<img width="806" height="372" alt="Screenshot 2025-12-24 at 9 28 53 AM" src="https://github.com/user-attachments/assets/5a15a20b-1d90-45de-ba27-9f909485c422" />


> Important: The nologin shell prevents interactive use but does not prevent all access (e.g., web applications, file transfers).

---

**Group**

A group is a collection of users that must share access to files and other system resources.

- Groups have group names for easier recognition
- Internally, the system distinguishes groups by the Group ID (GID)
- `/etc/group` Each line contains four colon separated fields
- Format: `<group_name>: x:<GID>: <members of the group>`
- Example:
```bash
cat /etc/group
```
`group01:x:10000:user01,user02,user03`

| Field | Description |
|-------|-------------|
| `group01` | Group name |
| `x` | Obsolete group password field (placeholder) |
| `10000` | GID number |
| `user01,user02,user03` | Members of the group (supplementary) |


**-Group Types**

| Type | GID Range |
|------|-----------|
| Root group | 0 |
| System/Service groups | 1-200 (static), 201-999 (dynamic) |
| Normal user groups | 1000+ |


**Primary vs Supplementary Groups**

| Type | Description |
|------|-------------|
| **Primary Group** | Each user has exactly one; listed by GID in /etc/passwd; owns files the user creates |
| **Supplementary Groups** | Additional groups stored in /etc/group; a user can have multiple (up to 15) |

```bash
user01@host:~$ id
```
`uid=1001(user01) gid=1003(user01) groups=1003(user01),10(wheel),10000(group01)`

**- Display Group Membership**
  - Syntax: groups <user_name>
```bash
groups root
groups cnode
```
<img width="803" height="123" alt="Screenshot 2025-12-24 at 7 18 11 AM" src="https://github.com/user-attachments/assets/f8a2ab7a-3507-4bce-a003-c838444d1b92" />

---

**Managing Local Group Accounts**

**- Creating Groups**
```bash
groupadd group01                    # Create with the next available GID
groupadd PHPDev
groupadd -g 1900 group02           # Create with specific GID
groupadd -r group03                 # Create system group
```

**- Modifying Groups**
```bash
groupmod -n group0022 group02       # Rename group
groupmod -g 2000 group0022          # Change GID
```

**- Deleting Groups**
```bash
groupdel group0022
```
> Important: Cannot remove a group if it is the primary group of an existing user.


**-Changing Group Membership**

  **- Change primary group:**
```bash
usermod -g group01 user02
```
<img width="799" height="91" alt="Screenshot 2025-12-24 at 8 33 29 AM" src="https://github.com/user-attachments/assets/c124cbd7-bfa3-4715-b807-bd6d1cd48e7d" />
<img width="804" height="60" alt="Screenshot 2025-12-24 at 8 33 41 AM" src="https://github.com/user-attachments/assets/9a8ae715-d603-421f-be28-4b5684822d82" />

> Note: This does not add the old primary group to supplementary groups.


**- Add to supplementary group:**
```bash
groupmod -aU user03 group01
```
<img width="801" height="84" alt="Screenshot 2025-12-24 at 8 39 31 AM" src="https://github.com/user-attachments/assets/caaef710-37f0-4301-983f-7d60504b9490" />
> Warning: Without `-a` option, the command replaces existing group members.

**- Temporarily Changing Primary Group**
```bash
su - user03

user03@host:~$ newgrp group01

user03@host:~$ id
```
`uid=1007(user03) gid=10000(group01) groups=1009(user03),10000(group01)`

<img width="803" height="299" alt="Screenshot 2025-12-24 at 8 42 44 AM" src="https://github.com/user-attachments/assets/704d19ed-4dc2-4b76-a8bd-960da0df5df0" />

---

**Gaining Superuser Access**

**- The Superuser**
  - The root user has all power over the system
  - Can override regular privileges on the file system
  - Used for installing/removing software and managing system files

> Important: In RHEL 10, the root account has no valid password by default. 
> Warning: System administrators should log in as a regular user and escalate privileges only when needed.

**- Switching User Accounts with `su`**
```bash
su - Dev
  Password: Enter_Dev_password
```
<img width="801" height="188" alt="Screenshot 2025-12-24 at 7 23 43 AM" src="https://github.com/user-attachments/assets/bef361d2-3c0f-458c-be98-880660d23ac8" />


```bash
su -
  Password: Enter_root_password
```
<img width="802" height="137" alt="Screenshot 2025-12-24 at 7 21 48 AM" src="https://github.com/user-attachments/assets/0a8c6d48-30bc-4b30-a197-19f9e30b370c" />

| Command | Description |
|---------|-------------|
| `su -` | Starts an interactive login shell with the target user's environment settings |
| `su` | Starts an interactive shell but partially uses the original user's environment |

<img width="804" height="87" alt="Screenshot 2025-12-24 at 7 34 56 AM" src="https://github.com/user-attachments/assets/977d13ea-ab6d-4704-bee2-c820402b550b" />


**- Running Commands with Sudo**
  - The `sudo` command requires users to enter their own password for authentication (not the target user's password).

```bash
cnode@localhost:~$ sudo usermod -L Dev
    [sudo] password for user01: Dev_password
```

> Note: By default, `sudo` caches your password for five minutes.  Use `sudo -k` to immediately remove it from cache.

**- If sudo access is denied:**
```bash
cnode@host:~$ sudo tail /var/log/secure
    [sudo] password for cnode: cnode_password
```
  `cnode is not in the sudoers file.  This incident will be reported.`


**- Getting an Interactive Root Shell with Sudo**

| Command | Description |
|---------|-------------|
| `sudo -i` | Switch to root account with login shell and interactive scripts |
| `sudo -s` | Run shell without interactive scripts |
| `sudo -k` | Clear cached credentials  |

```bash
ec2-user@host:~$ sudo -i
    [sudo] password for ec2-user: ec2-user_password
```
`root@host:~#`

<img width="806" height="376" alt="Screenshot 2025-12-24 at 7 39 58 AM" src="https://github.com/user-attachments/assets/5a13bce7-9831-4473-b6af-1cee60589a81" />


**- Configuring Sudo**
  - Main Configuration File: `/etc/sudoers` Edit only with the `visudo` command (validates syntax and prevents concurrent editing).

**- Sudoers Entry Format**
```
%wheel        ALL=(ALL: ALL)       ALL
```

![Screenshot 2025-12-24 at 7 45 59 AM](https://github.com/user-attachments/assets/cf9cee25-61e0-4957-8078-3853c07c3abb)


| Component | Description |
|-----------|-------------|
| `%wheel` | User or group (% indicates group) |
| First `ALL` | Hosts where rule applies |
| Second `ALL` | Users commands can be run as |
| Third `ALL` | Groups commands can be run as |
| Final `ALL` | Commands that can be run |

- `/etc/sudoers.d` Directory
  - Add sudo access by placing files in this directory.

- Enable full sudo for a Dev:
  - `sudo vim /etc/sudoers`
```bash
# /etc/sudoers.d/Dev
Dev        ALL=(ALL)       ALL
```

<img width="801" height="557" alt="Screenshot 2025-12-24 at 7 59 12 AM" src="https://github.com/user-attachments/assets/c892ba9f-9656-4796-987a-fda33deed1f4" />

**- Enable full sudo for a group:**
```bash
# /etc/sudoers.d/PHPDev
%PHPDev        ALL=(ALL)       ALL
```

**- Allow sudo without a password:**
```bash
ansible        ALL=(ALL)       NOPASSWD:  ALL
```

**- Allow a specific command for a specific user:**
```bash
# /etc/sudoers. d/user03
%user03 ALL=(operator) /bin/id
```

**- Granting Selective Administrative Commands**

```bash
# Find command paths
which useradd
which passwd
which usermod
which userdel
```

`sudo visudo`
```bash
User_Alias TRUSTEDUSERS=Dev,Harrish,user03
Cmd_Alias LIMITEDCMD=/usr/sbin/useradd, /usr/sbin/usermod, /usr/bin/passwd
TRUSTEDUSERS ALL=LIMITEDCMD
```
```
su - Harrish

sudo useradd testuser
sudo userdel testuser
```
<img width="917" height="123" alt="Screenshot 2025-12-24 at 9 49 00 AM" src="https://github.com/user-attachments/assets/066fa706-7a0e-49b8-b7a5-941f8792146d" />

- Permit all commands except specific ones: 
```bash
TRUSTEDUSERS ALL=ALL, ! LIMITEDCMD
```

---

**Configuration Files**

- `/etc/default/useradd`
```bash
GROUP=100                # Default primary group ID for new users
HOME=/home               # Base directory where user home directories are created
INACTIVE=-1              # Days after password expiry before account disabled (-1 = never)
EXPIRE=                  # Account expiration date (YYYY-MM-DD); empty = no expiry
SHELL=/bin/bash          # Default login shell for new users
SKEL=/etc/skel           # Skeleton directory copied into new user's home
CREATE_MAIL_SPOOL=yes    # Create a mail spool for new users (yes/no)
```

- `/etc/login.defs` Key Variables

| Variable | Description |
|----------|-------------|
| `MAIL_DIR` | Mail spool location |
| `UMASK` | Default umask |
| `HOME_MODE` | Home directory permissions |
| `PASS_MAX_DAYS` | Maximum password age |
| `PASS_MIN_DAYS` | Minimum password age |
| `PASS_WARN_AGE` | Warning period |
| `UID_MIN/UID_MAX` | UID range |
| `GID_MIN/GID_MAX` | GID range |
| `SYS_UID_MIN/SYS_UID_MAX` | System UID range |
| `SYS_GID_MIN/SYS_GID_MAX` | System GID range |
| `ENCRYPT_METHOD` | Password hashing algorithm |
| `USERGROUPS_ENB` | Create user's primary group |
| `CREATE_HOME` | Create home directory |


- `/etc/skel` Directory
  - Contains files copied to the new user's home directory:
```bash
.  .. .bash_logout . bash_profile .bashrc .mozilla
```
> Note: Add files to `/etc/skel` to automatically copy them to new users' home directories.

---

**Special Permissions**

| Permission | Symbolic | Octal |
|------------|----------|-------|
| setuid | u+s | 4 |
| setgid | g+s | 2 |
| sticky | o+t | 1 |

- Examples:
```bash
chmod 2770 example    # Set setgid + rwx for user/group
chmod 0770 example    # Remove special permissions
chmod g+s directory   # Set SGID
chmod o+t directory   # Set sticky bit
```

**- SGID Bit**
  - Files/directories created inside inherit the group ownership of the parent directory. 
```bash
[user@host ~]$ ls -ld /run/log/journal
drwxr-sr-x. 3 root systemd-journal 60 May 18 09:15 /run/log/journal
```

**- Sticky Bit**
  - Only the owner can delete their own files in the directory. 

**- SUID Bit**
  - Commands run as the user who owns the file, not the user who ran the command. 
```bash
[user@host ~]$ ls -l /usr/bin/passwd
-rwsr-xr-x. 1 root root 35504 Jul 16 2010 /usr/bin/passwd
```

**- Special Permission Indicators**

| Symbol | Meaning |
|--------|---------|
| `s` (lowercase) | Execute permission + SUID/SGID bit |
| `S` (uppercase) | SUID/SGID bit only (no execute) |
| `t` (lowercase) | Execute permission + sticky bit |
| `T` (uppercase) | Sticky bit only (no execute) |

---

**ACL (Access Control List)**

**- Granting Privileges**
```bash
setfacl -m u: <user_name>:<permission> file/dir    # User
setfacl -m g:<group_name>:<permission> file/dir   # Group
setfacl -m o:<permission> file/dir                # Others
```

- Examples:
```bash
setfacl -m u:saka:rwx /home/raya
setfacl -m g:developer:rx /home/raya
```

**- Viewing ACL**
```bash
getfacl /home/raya
ls -ld /home/raya    # '+' in permissions indicates ACL
```

**- Revoking Privileges**
```bash
setfacl -x u: <user_name> file/dir
setfacl -x g:<group_name> file/dir
```

---

**Example 1: Creating Departmental Structure Example**

1. Create groups for each department
```bash
groupadd developer
groupadd operation
groupadd support
```

2. Create user accounts
```bash
useradd CEO
useradd -G developer ram
useradd -G developer hari
useradd -G operation gita
useradd -G operation sita
usermod -G support harry
usermod -G support david
useradd -G developer,operation,support manager
```

3. Create common folders
```bash
cd /
mkdir devfile opfile supfile
```

4. Change ownership
```bash
chown CEO:developer dev
chown CEO:operation op
chown CEO:support sup
```

5. Set permissions
```bash
chmod 770 devfile opfile supfile
```

6. Apply SGID for group inheritance
```bash
chmod g+s devfile opfile supfile
```

7. Apply sticky bit to prevent deletion by non-owners
```bash
chmod o+t devfile opfile supfile
```

**Example 2: Create User with Specific Requirements**
  - Create user "Steve" with UID 1100, primary GID 1100, home directory /home/Steve, Korn shell (ksh)
  - Grant "Steve" administrative privileges using sudo
  - Set account to expire in 90 days with a 5 day warning and lock 1 week after expiration
  - Create "developers" group with password, add "Steve", "Sue", and "Taylor"
```
# Install Korn Shell
sudo dnf install -y ksh

# Create group first (with GID 1100)
sudo groupadd -g 1100 steve

# Create user Steve
sudo useradd -u 1100 -g 1100 -d /home/Steve -s /bin/ksh -G wheel steve

# Create additional users
sudo useradd sue
sudo useradd taylor

# Create developers group
sudo groupadd developers

# Add users to developers group
sudo gpasswd -M sue,taylor,steve developers

# Set group password for developers
sudo gpasswd developers

# Set account aging for Steve (corrected)
sudo chage -E $(date -d "+90 days" +%Y-%m-%d) -W 5 -I 7 steve
```
---
