## Vi/Vim Editor

Vi is not specifically the "default" editor of Red Hat Enterprise Linux; it's standard across Unix systems. Different distributions may have different default editors. 


- Modes of Operation
  - Vi/vim operates in several distinct modes:
    - **Normal Mode** - For navigation and text manipulation (default mode)
    - **Insert Mode** - For typing and editing text
    - **Command line Mode** (Ex-Mode) - For file operations and advanced commands
    - **Visual Mode** - For selecting and manipulating blocks of text *(vim only)*
    - **Replace Mode** - For overwriting existing text *(vim only)*


- Insert Mode Commands To enter Insert Mode from Normal Mode: 

| Command | Description |
|---------|-------------|
| `a` | Append text after the current cursor position |
| `i` | Insert text before the current cursor position |
| `A` | Append text at the end of the current line |
| `I` | Insert text at the beginning of the current line |
| `o` | Open a new line below the current line |
| `O` | Open a new line above the current line |
| `s` | Substitute the current character |
| `S` | Substitute the entire current line |

- To exit Insert Mode:  Press `ESC` to return to Normal Mode

> Note:`u` (undo) works in Normal mode, not Insert mode.

- Command Mode Operations
  - Cursor Movement


- Basic Movement
  
| Command | Description |
|---------|-------------|
| `h` | Move one character left |
| `l` | Move one character right |
| `j` | Move one line down |
| `k` | Move one line up |


- Line Navigation
  
| Command | Description |
|---------|-------------|
| `0` | Move to the beginning of the current line |
| `$` | Move to the end of the current line |
| `^` | Move to the first non-blank character of the line |


- Word Navigation
  
| Command | Description |
|---------|-------------|
| `w` | Move one word forward |
| `b` | Move one word backward |
| `e` | Move to the end of the current word |


- Sentence and Paragraph Navigation
  
| Command | Description |
|---------|-------------|
| `)` | Move one sentence forward |
| `(` | Move one sentence backward |
| `}` | Move one paragraph forward |
| `{` | Move one paragraph backward |


- File Navigation
  
| Command | Description |
|---------|-------------|
| `gg` | Move to the top of the file |
| `G` | Move to the bottom of the file |
| `10G` | Move to line 10 (replace 10 with desired line number) |
| `Ctrl+f` | Page down |
| `Ctrl+b` | Page up |

- Line Numbers
```bash
: set number    # Display line numbers temporarily
:set nonumber  # Hide line numbers
```

**For permanent line numbers:**
```bash
vim ~/.vimrc      # User-specific configuration

set number        # Add this line: 

sudo vim /etc/vimrc      # System wide configuration (requires root)
```

- Text Operations
  
- Basic Operations Table
  
| Operation | Character | Word | Line |
|-----------|-----------|------|------|
| **Delete** | `x` or `dl` | `dw` | `dd` |
| **Copy (Yank)** | `yl` | `yw` | `yy` |
| **Change** | `cl` or `s` | `cw` | `cc` or `S` |


| Command | Description |
|---------|-------------|
| `yy` | Copy (yank) the current line |
| `5yy` | Copy the next 5 lines |
| `dd` | Delete the current line |
| `5dd` | Delete the next 5 lines |
| `p` | Paste after cursor |
| `P` | Paste before cursor |
| `u` | Undo last change |
| `Ctrl+r` | Redo last undone change |
| `x` | Delete character under cursor |
| `X` | Delete character before cursor |


- Ex-Mode Commands
  - Enter Command line Mode by typing `:` from Normal Mode. 

- Searching Text

| Command | Description |
|---------|-------------|
| `/text` | Search forward for "text" |
| `?text` | Search backward for "text" |
| `n` | Find next occurrence (same direction as last search) |
| `N` | Find next occurrence (opposite direction) |
| `*` | Search for word under cursor (forward) |
| `#` | Search for word under cursor (backward) |

- Search and Replace
  - Global Replace
```bash
:%s/old_text/new_text/g     # Replace all occurrences without confirmation
:%s/old_text/new_text/gc    # Replace all occurrences with confirmation
```

  - Range Based Replace
```bash
:10,20s/old_text/new_text/g    # Replace between lines 10-20
: .,+25s/old_text/new_text/g    # Replace in next 25 lines from current position
```

- Explanation of symbols:
  - `%` - Entire file
  - `s` - Substitute command
  - `g` - Global (all occurrences on each line)
  - `c` - Confirm each replacement
  - `.` - Current line position


- Save and Exit
  
| Command | Description |
|---------|-------------|
| `:w` | Save file (write) |
| `:q` | Quit (only if no changes made) |
| `:wq` | Save and quit |
| `:x` | Save and quit (same as :wq) |
| `ZZ` | Save and quit (Normal mode command) |
| `:q!` | Quit without saving (force quit) |
| `:w!` | Force save (for read-only files) |
| `:wq!` | Force save and quit |
| `:e! ` | Reload file, discarding all unsaved changes |

Note:`:wq! ` forces save and quit, but `:w!` is the correct command for saving read only files.

- Visual Mode
> Note: Visual mode is available only in Vim, not in traditional vi.

- Character Oriented Visual Mode
    1. Press `v` to enter character visual mode
    2. Move the cursor to select text character by character
    3. Perform operations

- Line Oriented Visual Mode
    1. Press `V` (Shift+v) to enter line visual mode
    2. Use arrow keys or `j`/`k` to select multiple lines
    3. Perform operations

- Block Oriented Visual Mode
    1. Press `Ctrl+v` to enter block visual mode
    2. Select rectangular blocks of text
    3. Useful for editing columnar data

- Visual Mode Operations:
  - `y` - Copy (yank) selected text
  - `d` - Delete selected text
  - `c` - Change (delete and enter insert mode)
  - `p` - Paste (after exiting visual mode)
  - `u` - Convert to lowercase
  - `U` - Convert to uppercase


- File Protection with Passwords

> Note: Password protection is available only in Vim, not in traditional vi.

- Encrypting a File
```bash
vim filename
# Add content and press ESC to enter Normal Mode
: X
# Enter encryption key:  [type your password]
# Enter same key again: [retype password]
: wq
```

- Opening an Encrypted File
```bash
vim filename
# Need encryption key for filename
# Enter encryption key: [enter password]
```

- Removing Password Protection
```bash
vim filename
# Enter encryption key: [enter current password]
: X
# Enter encryption key: [leave blank and press Enter]
# Enter same key again: [leave blank and press Enter]
: wq
```

- Crash Recovery
  - Vi/vim automatically creates hidden swap files (`.filename. swp`) to protect against data loss. 

- Understanding Swap Files
```bash
# Open a file
vi myfile.txt

# In another terminal, check for swap file
ls -la                                      # You'll see:  .myfile.txt.swp
```

- Recovering from Crash
```bash
# Method 1: Use the recovery option when opening
vim filename                                          # vim will detect the swap file and offer recovery options

# Method 2: Recover explicitly from the swap file
vim -r filename

# Method 3: Recover from a specific swap file
vim -r . filename.swp
```

- Cleanup After Recovery
```bash
# After successful recovery, remove swap file
rm .filename. swp
```
